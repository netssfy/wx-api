(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1065539a"],{1548:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.modeDesc[t.mode]+"用户标签","close-on-click-modal":!1,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择标签"},model:{value:t.selectedTagid,callback:function(e){t.selectedTagid=e},expression:"selectedTagid"}},t._l(t.tagidsInOption,(function(e){return n("el-option",{key:e,attrs:{label:t.getTagName(e),value:e}})})),1),n("div",{staticStyle:{"margin-top":"20px"}},[t._v("已选择用户数："+t._s(t.wxUsers.length))])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")]),n("el-button",{attrs:{type:"primary",disabled:t.submitting},on:{click:function(e){return t.dataFormSubmit()}}},[t._v(t._s(t.submitting?"保存中...":"确定"))])],1)])},r=[],a=(n("d81d"),n("4de4"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("159b"),n("a630"),n("7db0"),n("b0c0"),n("2f62")),o={name:"wx-user-tagging",props:{wxUsers:Array},data:function(){return{mode:"tagging",modeDesc:{tagging:"绑定",untagging:"解绑"},selectedTagid:"",dialogVisible:!1,submitting:!1}},computed:Object(a["b"])({wxUserTags:function(t){return t.wxUserTags.tags},tagidsInOption:function(){var t=this.wxUsers.map((function(t){return t.tagidList||[]}));if("tagging"==this.mode){var e=this.wxUserTags.map((function(t){return t.id}));return e.filter((function(e){return!t.every((function(t){return t.indexOf(e)>-1}))}))}if("untagging"==this.mode){var n=new Set;return t.forEach((function(t){t.forEach((function(t){return n.add(t)}))})),Array.from(n)}return[]}}),methods:{init:function(t){if("tagging"!=t&&"untagging"!=t)throw"mode参数有误";this.mode=t,this.dialogVisible=!0},getTagName:function(t){var e=this.wxUserTags.find((function(e){return e.id==t}));return e?e.name:"?"},dataFormSubmit:function(){var t=this;if(!this.submitting)if(this.selectedTagid){this.submitting=!0;var e=this.wxUsers.map((function(t){return t.openid}));this.$http({url:this.$http.adornUrl("/manage/wxUserTags/".concat("tagging"==this.mode?"batchTagging":"batchUnTagging")),method:"post",data:this.$http.adornData({tagid:this.selectedTagid,openidList:e})}).then((function(e){var n=e.data;t.submitting=!1,n&&200===n.code?t.$message({message:"操作成功,列表数据需稍后刷新查看",type:"success",onClose:function(){return t.dialogVisible=!1}}):t.$message.error(n.msg)}))}else this.$message.error("未选择标签")}}},s=o,u=n("2877"),f=Object(u["a"])(s,i,r,!1,null,null,null);e["default"]=f.exports},"1c59":function(t,e,n){"use strict";var i=n("6d61"),r=n("6566");i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},"4df4":function(t,e,n){"use strict";var i=n("da84"),r=n("0366"),a=n("c65b"),o=n("7b0b"),s=n("9bdd"),u=n("e95a"),f=n("68ee"),c=n("07fa"),d=n("8418"),l=n("9a1f"),g=n("35a1"),v=i.Array;t.exports=function(t){var e=o(t),n=f(this),i=arguments.length,h=i>1?arguments[1]:void 0,b=void 0!==h;b&&(h=r(h,i>2?arguments[2]:void 0));var p,m,x,y,w,k,T=g(e),O=0;if(!T||this==v&&u(T))for(p=c(e),m=n?new this(p):v(p);p>O;O++)k=b?h(e[O],O):e[O],d(m,O,k);else for(y=l(e,T),w=y.next,m=n?new this:[];!(x=a(w,y)).done;O++)k=b?s(y,h,[x.value,O],!0):x.value,d(m,O,k);return m.length=O,m}},"4fad":function(t,e,n){var i=n("d039"),r=n("861d"),a=n("c6b6"),o=n("d86b"),s=Object.isExtensible,u=i((function(){s(1)}));t.exports=u||o?function(t){return!!r(t)&&((!o||"ArrayBuffer"!=a(t))&&(!s||s(t)))}:s},6062:function(t,e,n){n("1c59")},6566:function(t,e,n){"use strict";var i=n("9bf2").f,r=n("7c73"),a=n("e2cc"),o=n("0366"),s=n("19aa"),u=n("2266"),f=n("7dd0"),c=n("2626"),d=n("83ab"),l=n("f183").fastKey,g=n("69f3"),v=g.set,h=g.getterFor;t.exports={getConstructor:function(t,e,n,f){var c=t((function(t,i){s(t,g),v(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=i&&u(i,t[f],{that:t,AS_ENTRIES:n})})),g=c.prototype,b=h(e),p=function(t,e,n){var i,r,a=b(t),o=m(t,e);return o?o.value=n:(a.last=o={index:r=l(e,!0),key:e,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=o),i&&(i.next=o),d?a.size++:t.size++,"F"!==r&&(a.index[r]=o)),t},m=function(t,e){var n,i=b(t),r=l(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return a(g,{clear:function(){var t=this,e=b(t),n=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=b(e),i=m(e,t);if(i){var r=i.next,a=i.previous;delete n.index[i.index],i.removed=!0,a&&(a.next=r),r&&(r.previous=a),n.first==i&&(n.first=r),n.last==i&&(n.last=a),d?n.size--:e.size--}return!!i},forEach:function(t){var e,n=b(this),i=o(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:n.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!m(this,t)}}),a(g,n?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return p(this,0===t?0:t,e)}}:{add:function(t){return p(this,t=0===t?0:t,t)}}),d&&i(g,"size",{get:function(){return b(this).size}}),c},setStrong:function(t,e,n){var i=e+" Iterator",r=h(e),a=h(i);f(t,e,(function(t,e){v(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),c(e)}}},"6d61":function(t,e,n){"use strict";var i=n("23e7"),r=n("da84"),a=n("e330"),o=n("94ca"),s=n("6eeb"),u=n("f183"),f=n("2266"),c=n("19aa"),d=n("1626"),l=n("861d"),g=n("d039"),v=n("1c7e"),h=n("d44e"),b=n("7156");t.exports=function(t,e,n){var p=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),x=p?"set":"add",y=r[t],w=y&&y.prototype,k=y,T={},O=function(t){var e=a(w[t]);s(w,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!l(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return m&&!l(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!l(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})},E=o(t,!d(y)||!(m||w.forEach&&!g((function(){(new y).entries().next()}))));if(E)k=n.getConstructor(e,t,p,x),u.enable();else if(o(t,!0)){var A=new k,S=A[x](m?{}:-0,1)!=A,z=g((function(){A.has(1)})),U=v((function(t){new y(t)})),j=!m&&g((function(){var t=new y,e=5;while(e--)t[x](e,e);return!t.has(-0)}));U||(k=e((function(t,e){c(t,w);var n=b(new y,t,k);return void 0!=e&&f(e,n[x],{that:n,AS_ENTRIES:p}),n})),k.prototype=w,w.constructor=k),(z||j)&&(O("delete"),O("has"),p&&O("get")),(j||S)&&O(x),m&&w.clear&&delete w.clear}return T[t]=k,i({global:!0,forced:k!=y},T),h(k,t),m||n.setStrong(k,t,p),k}},7156:function(t,e,n){var i=n("1626"),r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var o,s;return a&&i(o=e.constructor)&&o!==n&&r(s=o.prototype)&&s!==n.prototype&&a(t,s),t}},"7db0":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").find,a=n("44d2"),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},"9bdd":function(t,e,n){var i=n("825a"),r=n("2a62");t.exports=function(t,e,n,a){try{return a?e(i(n)[0],n[1]):e(n)}catch(o){r(t,"throw",o)}}},a630:function(t,e,n){var i=n("23e7"),r=n("4df4"),a=n("1c7e"),o=!a((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:o},{from:r})},bb2f:function(t,e,n){var i=n("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,a=n("1dde"),o=a("map");i({target:"Array",proto:!0,forced:!o},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},d86b:function(t,e,n){var i=n("d039");t.exports=i((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},f183:function(t,e,n){var i=n("23e7"),r=n("e330"),a=n("d012"),o=n("861d"),s=n("1a2d"),u=n("9bf2").f,f=n("241c"),c=n("057f"),d=n("4fad"),l=n("90e3"),g=n("bb2f"),v=!1,h=l("meta"),b=0,p=function(t){u(t,h,{value:{objectID:"O"+b++,weakData:{}}})},m=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,h)){if(!d(t))return"F";if(!e)return"E";p(t)}return t[h].objectID},x=function(t,e){if(!s(t,h)){if(!d(t))return!0;if(!e)return!1;p(t)}return t[h].weakData},y=function(t){return g&&v&&d(t)&&!s(t,h)&&p(t),t},w=function(){k.enable=function(){},v=!0;var t=f.f,e=r([].splice),n={};n[h]=1,t(n).length&&(f.f=function(n){for(var i=t(n),r=0,a=i.length;r<a;r++)if(i[r]===h){e(i,r,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},k=t.exports={enable:w,fastKey:m,getWeakData:x,onFreeze:y};a[h]=!0}}]);