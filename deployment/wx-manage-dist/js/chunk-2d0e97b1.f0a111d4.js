(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e97b1"],{"8e5c":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:e.selectFile}},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file"},on:{change:e.onFileChange}}),n("div",[e._v(e._s(e.uploading?e.infoText:"上传文件"))])])},i=[],s={name:"oss-uploader",data:function(){return{uploading:!1,infoText:"上传中...",cosConfig:[]}},mounted:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/oss/config"),method:"get",params:this.$http.adornParams()}).then((function(t){var n=t.data;n&&200===n.code&&n.config.type?e.cosConfig=n.config:e.$message.error("请先配置云存储相关信息！")}))},methods:{selectFile:function(){this.uploading||this.$refs.fileInput.click()},onFileChange:function(){var e=this,t=this.$refs.fileInput.files[0];this.uploading=!0;var n=new FormData;n.append("file",t),this.$http({url:this.$http.adornUrl("/sys/oss/upload"),method:"post",data:n}).then((function(t){var n=t.data;console.log(n),n&&200===n.code?e.$emit("uploaded",n.url):e.$message.error("文件上传失败："+n.msg),e.uploading=!1}))}}},a=s,l=n("2877"),r=Object(l["a"])(a,o,i,!1,null,null,null);t["default"]=r.exports}}]);